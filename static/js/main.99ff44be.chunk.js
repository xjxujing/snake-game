(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c,a=n(1),o=n.n(a),s=n(9),i=n.n(s),r=n(6),l=n(7),h=n(2),d=n(3),m=n(5),j=n(4),u=(n(14),n(15),n(0)),S=Object(a.memo)((function(e){return Object(u.jsxs)("div",{className:"start-cover",style:{display:"START"===e.gameState?"block":"none"},children:[Object(u.jsx)("div",{className:"game-title",children:"SNAKE"}),Object(u.jsx)("button",{onClick:e.onGameStart,type:"button",className:"start-btn nes-btn",children:"START"}),Object(u.jsx)("p",{className:"high-score",children:"High Score"}),Object(u.jsx)("p",{className:"high-score",children:String(e.highScore).padStart(5,"0")})]})})),O=(n(17),Object(a.memo)((function(e){var t=e.food;return Object(u.jsx)("span",{className:"dot food",style:{left:"".concat(t[0],"%"),top:"".concat(t[1],"%")}})}))),b=Object(a.memo)((function(e){var t=e.snakeBody;return Object(u.jsx)(u.Fragment,{children:t.map((function(e,t){var n={transform:"translate(".concat(25*e[0],"%,").concat(25*e[1],"%)")};return Object(u.jsx)("span",{className:"dot snake",style:n},t)}))})})),g=n.p+"static/media/control.2102a554.png",p=(n(18),function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).showScore=function(e){return String(e).padStart(5,"0")},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"control-box",children:[Object(u.jsxs)("div",{className:"control-left",children:[Object(u.jsx)("div",{className:"arrow-".concat(this.props.direction),children:Object(u.jsx)("span",{children:Object(u.jsx)("i",{className:"iconfont icon-jiantou"})})}),Object(u.jsxs)("div",{className:"control-speed",children:[Object(u.jsx)("small",{children:"SPEED"}),Object(u.jsxs)("div",{style:{lineHeight:"4.5rem"},children:[Object(u.jsx)("span",{onClick:function(){return e.props.changeSpeed("SPEED_DOWN")},children:Object(u.jsx)("i",{className:"iconfont icon-jian"})}),Object(u.jsx)("span",{onClick:function(){return e.props.changeSpeed("SPEED_UP")},children:Object(u.jsx)("i",{className:"iconfont icon-jia"})})]})]})]}),Object(u.jsx)("div",{className:"control-direction-box",children:Object(u.jsxs)("div",{className:"button",children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("img",{onClick:function(){return e.props.clickDirection("UP")},className:"control-direction d1",src:g,alt:"\u65b9\u5411"}),Object(u.jsx)("img",{onClick:function(){return e.props.clickDirection("RIGHT")},className:"control-direction d4",src:g,alt:"\u65b9\u5411"})]}),Object(u.jsxs)("div",{className:"item2",children:[Object(u.jsx)("img",{onClick:function(){return e.props.clickDirection("LEFT")},className:"control-direction d3",src:g,alt:"\u65b9\u5411"}),Object(u.jsx)("img",{onClick:function(){return e.props.clickDirection("DOWN")},className:"control-direction d2",src:g,alt:"\u65b9\u5411"})]})]})}),Object(u.jsxs)("div",{className:"control-right",children:[Object(u.jsxs)("div",{className:"record",children:[Object(u.jsx)("h6",{children:this.showScore(this.props.score)}),Object(u.jsx)("h6",{children:this.showScore(this.props.highScore)})]}),Object(u.jsx)("div",{style:{display:"".concat("CONTINUE"===this.props.gameState?"block":"none")},children:Object(u.jsx)("span",{onClick:this.props.onGameStateChange,children:Object(u.jsx)("i",{className:"iconfont icon-pause"})})})]})]})}}]),n}(a.Component)),f=(n(19),Object(a.memo)((function(e){var t=e.gameState;return Object(u.jsxs)("div",{className:"cover",style:{display:"".concat("PAUSE"===t?"block":"none")},children:[Object(u.jsx)("span",{className:"paused",children:"PAUSED"}),Object(u.jsxs)("div",{className:"opera",children:[Object(u.jsx)("span",{onClick:e.reStartGame,children:Object(u.jsx)("i",{className:"iconfont icon-list"})}),Object(u.jsx)("span",{onClick:e.onGameStateChange,children:Object(u.jsx)("i",{className:"iconfont icon-play"})})]})]})}))),v=Object(a.memo)((function(e){var t=e.gameState;return Object(u.jsxs)("div",{className:"cover",style:{display:"".concat("OVER"===t?"block":"none")},children:[Object(u.jsx)("span",{children:"GAME OVER"}),Object(u.jsx)("div",{className:"opera",children:Object(u.jsx)("span",{onClick:e.reStartGame,children:Object(u.jsx)("i",{className:"iconfont icon-list"})})})]})})),k=n.p+"static/media/click.3295752d.ogg",x=n.p+"static/media/gameover.b25dd26e.ogg",N=function(e){e&&clearTimeout(e)},y={snakeBody:[[0,0],[4,0]],food:C(),direction:"RIGHT",time:500,gameState:"START",aspectRatio:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;return(e/t).toFixed(2)>=.56}(),score:0},G=new Audio(k),E=new Audio(x);function C(){return[4*Math.floor((98*Math.random()+1)/4),4*Math.floor((98*Math.random()+1)/4)]}var T=localStorage.getItem("snake-game-high-score"),D=function(e){Object(m.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state=Object(l.a)(Object(l.a)({},y),{},{highScore:T||0}),e.componentDidUpdate=function(){"OVER"!==e.state.gameState&&(e.checkIsOut(),e.checkIsEatFood(),e.checkIsTouchSelf())},e.clickDirection=function(t){var n=e.state.direction;n!==t&&("LEFT"===n&&"RIGHT"===t||"LEFT"===t&&"RIGHT"===n||"UP"===n&&"DOWN"===t||"UP"===t&&"DOWN"===n||(G.play(),e.setState({direction:t})))},e.controlDirection=function(t){var n=t.key,c={ArrowUp:"UP",ArrowDown:"DOWN",ArrowRight:"RIGHT",ArrowLeft:"LEFT"};Object.keys(c).includes(n)&&e.clickDirection(c[n])},e.moveSnake=function(){if(N(c),"OVER"!==e.state.gameState){var t=Object(r.a)(e.state.snakeBody),n=t[t.length-1],a={UP:[n[0],n[1]-4],DOWN:[n[0],n[1]+4],RIGHT:[n[0]+4,n[1]],LEFT:[n[0]-4,n[1]]}[e.state.direction];t.push(a),t.shift(),e.setState({snakeBody:t}),c=setTimeout(e.moveSnake,e.state.time)}},e.checkIsOut=function(){var t=e.state.snakeBody[e.state.snakeBody.length-1];(t[0]>=100||t[1]>=100||t[0]<0||t[1]<0)&&e.onGameOver()},e.checkIsEatFood=function(){var t=e.state.snakeBody[e.state.snakeBody.length-1],n=e.state.food;if(t[0]===n[0]&&t[1]===n[1]){var c=Object(r.a)(e.state.snakeBody);c.unshift([]);var a=5*(c.length-2);e.setState({food:C(),snakeBody:c,score:a}),e.changeSpeed("SPEED_UP")}},e.checkIsTouchSelf=function(){var t=Object(r.a)(e.state.snakeBody),n=t.pop();t.forEach((function(t){t[0]===n[0]&&t[1]===n[1]&&e.onGameOver()}))},e.changeSpeed=function(t){var n=e.state.time;if("SPEED_UP"===t){if(n<300)return;G.play(),e.setState({time:n-100})}else{if(n>800)return;G.play(),e.setState({time:n+100})}},e.onGameStart=function(){G.play(),e.changeGameState("CONTINUE"),e.moveSnake()},e.reStartGame=function(){e.changeGameState("START"),e.state.highScore<e.state.score&&(localStorage.setItem("snake-game-high-score",e.state.score),e.setState({highScore:e.state.score})),e.setState(Object(l.a)({},y)),N(c)},e.onGameStateChange=function(){"PAUSE"===e.state.gameState?e.onGameContinue():e.onGamePause(),G.play()},e.changeGameState=function(t){e.setState({gameState:t})},e.onGamePause=function(){N(c),e.changeGameState("PAUSE")},e.onGameContinue=function(){e.changeGameState("CONTINUE"),e.moveSnake()},e.onGameOver=function(){N(c),E.play(),e.changeGameState("OVER")},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.controlDirection.bind(this))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.controlDirection.bind(this))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:["wrapper ".concat(this.state.aspectRatio?"height-100":"width-100")],children:[Object(u.jsx)(S,{highScore:this.state.highScore,gameState:this.state.gameState,onGameStart:this.onGameStart}),Object(u.jsxs)("div",{className:"game-area",children:[Object(u.jsx)(b,{snakeBody:this.state.snakeBody}),Object(u.jsx)(O,{food:this.state.food})]}),Object(u.jsx)(p,{score:this.state.score,highScore:this.state.highScore,direction:this.state.direction,clickDirection:function(t){return e.clickDirection(t)},onGameStateChange:this.onGameStateChange,changeSpeed:function(t){return e.changeSpeed(t)},gameState:this.state.gameState}),Object(u.jsx)(f,{gameState:this.state.gameState,onGameStateChange:this.onGameStateChange,changeGameState:this.changeGameState,reStartGame:this.reStartGame}),Object(u.jsx)(v,{gameState:this.state.gameState,reStartGame:this.reStartGame})]})}}]),n}(a.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};n(20),n(21);i.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),P()}],[[22,1,2]]]);
//# sourceMappingURL=main.99ff44be.chunk.js.map